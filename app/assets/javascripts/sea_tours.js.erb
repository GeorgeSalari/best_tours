$(document).ready(function(){
  $('#add_new_comment').submit(function(){
    $('#comment-submit').hide();
    $('#loading-comment').show();
    $('.please-wait').show();
  })

  $('.images-container .mask').click(function(){
    var modal_id = $(this).parent().attr('class').split(' ').pop();
    openModal($("#"+modal_id)[0] );
    currentSlide( $($(this).parent().children()[0]).attr('class').split(' ').pop(), $(this).parent().attr('class').split('_')[1], 'review' );
  })

  // Get the modal
  var modal = $('#imageModal');

  // Get the image and insert it inside the modal - use its "alt" text as a caption
  var images = $('.small_images')

  // Get the review image modal
  var review_modal = $('#reviewImageModal');

  // Get the review image and insert it inside the modal - use its "alt" text as a caption
  var review_images = $('.review_small_images')

  images.each(function(){
    this.onclick = function(){
      openModal(<%= "imageModal_0" %>);
      currentSlide($(this).attr('class').split(' ').pop())
    }
  })

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close_image")[0];

  // When the user clicks on <span> (x), close the modal
  if(typeof span != 'undefined') {
    span.onclick = function() {
      modal.modal('hide');
    }
  }

  review_images.each(function(){
    this.onclick = function(){
      var modal_id = $(this).parent().attr('class').split(' ').pop();
      openModal($("#"+modal_id)[0] );
      currentSlide( $(this).attr('class').split(' ').pop(), $(this).parent().attr('class').split('_')[1], 'review' );
    }
  })

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close_image")[0];

  // When the user clicks on <span> (x), close the modal
  if(typeof span != 'undefined') {
    span.onclick = function() {
      review_modal.modal('hide');
    }
  }

})
